#%Module1.0
#####################################################################
##
## pathoscope Modulefile
## by Alan Orth <a.orth@cgiar.org>
## March, 2022
##

set appname         pathoscope
set version         2.0.7
set prefix          /export/apps/${appname}/${version}
set exec_prefix     ${prefix}/bin
set url             "https://github.com/PathoScope/PathoScope"
set msg             "Species identification and strain attribution with unassembled sequencing data.\nOfficial Site: $url\n"

module-whatis $msg

proc ModulesHelp { } {
    puts stderr "$msg"
}

conflict            $appname

prepend-path        PATH            ${exec_prefix}
prepend-path        PYTHONPATH      ${prefix}/lib/python2.7/site-packages
prepend-path        PYTHONPATH      ${prefix}

# pathoscope uses a virtualenv based on python/2.7. I'm not sure if this techni-
# cally needs to be loaded, but it can't hurt since it will also set some other
# environment variables like LD_LIBRARY_PATH and PYTHONHOME.
if { ![is-loaded python/2.7] } { 
    module load python/2.7
}

# pathoscope requires samtools < 1.0.
if { ![is-loaded samtools/0.1.19] } { 
    module load samtools/0.1.19
}

# pathoscope requires bowtie2, but doesn't say which specific version so I will
# just load the latest we have.
if { ![is-loaded bowtie2/2.3.4.1] } { 
    module load bowtie2/2.3.4.1
}

# vim: set sw=4 ts=4:
