#%Module1.0#####################################################################
##
## kleborate modulefile
## By Alan Orth <a.orth@cgiar.org>
## August, 2025
##

set appname kleborate
set version 3.2.4
set prefix  /export/apps/${appname}/${version}
set venv    ${prefix}
set url     "https://github.com/klebgenomics/Kleborate"
set msg     "Kleborate was primarily developed to screen genome assemblies of Klebsiella pneumoniae and the Klebsiella pneumoniae species complex (KpSC).\nOfficial site: $url\n"

# kleborate has its own kaptive
conflict    kaptive

# this was installed with python/3.10 and needs its LD_LIBRARY_PATH
if { ![is-loaded python/3.10] } { 
    module load python/3.10
}

# wants minimap2 but doesn't say which version
if { ![is-loaded minimap2] } { 
    module load minimap2/2.28
}

# wants amrfinder and stxtyper (included in amrfinder 4+)
if { ![is-loaded amrfinder/4.0.22] } { 
    module load amrfinder/4.0.22
}

if { ![is-loaded ectyper] } { 
    module load ectyper/2.0.0
}

if { ![is-loaded ezclermont] } { 
    module load ezclermont/0.7.0
}

prepend-path    PATH        ${venv}/bin
prepend-path    PYTHONPATH  ${venv}/lib/python3.10/site-packages

# vim: set sw=4 ts=4:
